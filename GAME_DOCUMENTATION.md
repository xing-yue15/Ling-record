# 《灵记》游戏开发进度文档

本文档用于记录卡牌游戏《灵记》的开发进度，明确已实现功能与未来开发计划。

## 游戏状态

当前版本已具备完整的核心游戏循环和基础 UI 框架，可以被视为一个可玩的**游戏原型**。玩家可以从主页开始，完整体验“选择世界 -> 选择敌人 -> 选择卡组 -> 进入战斗”的全部流程。

---

## 已实现功能 (Implemented Features)

### 1. 核心游戏流程
- **主页与入口**: 简洁的主页，包含“登录”和“注册”按钮，作为玩家进入游戏的入口。
- **世界选择**: 独立的 `/worlds` 页面，采用可横向滑动的卡片式设计，展示不同的冒险世界。
- **敌人选择**: 进入特定世界后（如“魔幻世界”），会展示该世界下的敌人列表，包含敌人形象、名称和描述。
- **卡组选择**: 战斗前会进入独立的 `/deck-selection` 页面，玩家可以从预设的卡组中选择一个进行战斗，也可以选择创建新卡组。
- **战斗界面**: 基础的 `/battle` 页面，包含玩家与对手的区域、生物卡槽、手牌展示和回合控制按钮。

### 2. 核心战斗机制
- **回合制**: 实现了基础的回合交替逻辑。
- **卡牌出牌**: 玩家可以将手牌中的卡牌（法术牌或造物牌）打出。
- **法术结算**: 法术牌被打出后会进入结算区，其效果（目前主要是伤害和治疗）会在回合结束时正确结算。
- **生物放置**: 造物牌可以被放置到战场上的空位。
- **AI 对手**: 实现了非常初级的 AI，它会自动打出一张手牌并结束回合。

### 3. 卡牌构筑
- **海量词条数据**: 已将您设计的超过70个新“术式”词条（包括原初、混乱、生命、死亡等15个大类）全部录入到游戏数据中。
- **基础构筑器**: 存在一个 `/deck-builder` 页面，玩家可以在此查看可用词条并进行卡牌的自由创造和组合。

### 4. UI与用户体验
- **沉浸式游戏界面**: 在所有游戏流程页面（世界选择、敌人选择、卡组选择、战斗、构筑器）都隐藏了网站通用的页眉和页脚，提供全屏游戏体验。
- **玩家状态展示**: 在冒险界面，用占位符UI模拟了玩家的生命值、法力值和已拥有词条数量的显示。
- **视觉优化**: 
  - 调整了敌人图片大小，使其在卡片中更协调。
  - 将卡牌右上角的法力消耗数字高亮为蓝色，并替换了图标，提升了辨识度。

---

## 待实现功能 (To Be Implemented)

### 1. 核心游戏玩法
- **复杂卡牌效果**: 实现您设计的海量术式的具体游戏逻辑，例如“永恒”、“湮灭”、“同心”、“魅惑”等，这是接下来的核心开发重点。
- **战斗阶段逻辑**: 实现场上生物之间的自动攻击、反击逻辑。
- **玩家成长系统**:
  - 战斗胜利后的生命/法力上限提升机制。
  - 胜利后从敌人处获取新词条的奖励机制。
- **资源系统**: 实现真实的法力消耗系统（当前仅为显示）。

### 2. 后端与数据持久化 (Firebase 集成)
- **用户认证**: 集成 Firebase Authentication，实现真正的玩家注册和登录功能。
- **数据存储**: 使用 Firestore 数据库来存储每个玩家的个人数据，包括：
  - 已拥有的词条库。
  - 已保存的牌组。
  - PVE 进度（已解锁的世界、已击败的敌人）。
  - 玩家的生命/法力上限等成长数据。

### 3. 功能完善与优化
- **牌组管理**: 实现牌组的“保存”、“命名”和“删除”功能。
- **设置菜单**: 为右上角的设置按钮添加实际功能，如返回主页、调整音量、查看游戏规则等。
- **AI 优化**: 提升 AI 的智能程度，让它能根据战场情况做出更合理的决策，而不是随机出牌。
- **动画与特效**: 为卡牌抽取、出牌、攻击、受到伤害等行为添加视觉和音效反馈，提升游戏表现力。
- **规则文本实现**: 将所有带有 `??` 或 `[触发特定效果]` 的规则描述替换为最终确定的游戏逻辑。
